Search queries

Accessing nested structure of the Entity is done using ".", you can use multiple dots in sequence.

---
Search for whole charm name:

http get localhost:9200/charmstore/entity/_search?q=charmmeta.name:'mediawiki'

---
Search for only a part of the name
- note that n-grams seem not to work currently
Prefix (simulating autocompletion search)

http get localhost:9200/charmstore/entity/_search?q=charmmeta.name:'me*'

---
Substring, finding anything related in a name to a given substring (note that prefix and substring are needed just because we don't have n-grams yet).

http get localhost:9200/charmstore/entity/_search?q=charmmeta.name:*wiki*

---
Bundle name

There is no bundle name, we only have "id" part. To get all bundles, use:
_search?q=entity.id:'cs\:bundle\/*'

To get a bundle by name, use: (if substring, use *$substring*)
http get localhost:9200/charmstore/_search?q=entity.id:'cs\:bundle\/media*'

---
Tags

For charms, the single tag query is:
_search?q=entity.charmmeta.categories:'$tag'

http get localhost:9200/charmstore/_search?q=entity.charmmeta.categories:'applic*'

For multiple, the syntax is simple, just use q=( term1 AND term2 ...).   

http get http://localhost:9200/charmstore/_search?q='(entity.charmmeta.categories:applic*%20AND%20entity.charmmeta.categories:wik*)'

---
Owner
_search?q='entity.id:cs\:\~jonhdoe*'

http get http://localhost:9200/charmstore/_search?q='entity.id:cs\:\~john*'

---
Provides

We have two entry points in the schema for this, but the entity.charmmeta.provides.interface seems not to work :( We use the "charmprovidedinterfaces" instead.

_search?q='entity.charmprovidedinterfaces:http'

use AND here as well to search for multiple ones.

http get http://localhost:9200/charmstore/_search?q='entity.charmprovidedinterfaces:http'

---
Requires

We have two entry points in the schema for this, but the entity.charmmeta.requires.interface seems not to work :( We use the "charmrequiredinterfaces" instead.

_search?q='entity.charmrequiredinterfaces:mysql'

use AND to search for multiple ones

http get http://localhost:9200/charmstore/_search?q='(entity.charmrequiredinterfaces:mysql AND entity.charmrequiredinterfaces:mem*)'

---
Series

_search?q='entity.id:\:SERIES\/'

Search for charms that provide interface and the charm being of specific series: 
http get http://localhost:9200/charmstore/_search?q='(entity.charmprovidedinterfaces:http AND entity.id:*\:precise\/*)'

---
Descritpion

_search?q='entity.charmmeta.description:*KEYWORD*'

http get http://localhost:9200/charmstore/_search?q='entity.charmmeta.description:*engine*'

---
Full text search:

_search?q='KEYWORD'

